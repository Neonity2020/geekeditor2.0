{"content":[{"key":"paragraph","data":{"content":"对于JS编程新手来说，拖放排序是个挺难理解和处理的基础算法。\nDS V3已经可以非常好地实现Demo的生成了。我们来看一下效果。"},"common":{"quote":false}},{"key":"image","data":{"image":{"assetName":"1743029064750-Pasted image 20250327063356.png","url":"https://cdn.jsdelivr.net/gh/Neonity2020/geekeditor2.0/images/2025-3-27/1743029064750-Pasted%20image%2020250327063356.png"},"caption":"Pasted image 20250327063356.png","withCaption":true},"common":{}},{"key":"image","data":{"image":{"assetName":"1743029014401-Pasted image 20250327063518.png","url":"https://cdn.jsdelivr.net/gh/Neonity2020/geekeditor2.0/images/2025-3-27/1743029014401-Pasted%20image%2020250327063518.png"},"caption":"Pasted image 20250327063518.png","withCaption":true},"common":{}},{"key":"image","data":{"image":{"assetName":"1743029014410-Pasted image 20250327063814.png","url":"https://cdn.jsdelivr.net/gh/Neonity2020/geekeditor2.0/images/2025-3-27/1743029014410-Pasted%20image%2020250327063814.png"},"caption":"Pasted image 20250327063814.png","withCaption":true},"common":{}},{"key":"image","data":{"image":{"assetName":"1743029014412-Pasted image 20250327063839.png","url":"https://cdn.jsdelivr.net/gh/Neonity2020/geekeditor2.0/images/2025-3-27/1743029014412-Pasted%20image%2020250327063839.png"},"caption":"Pasted image 20250327063839.png","withCaption":true},"common":{}},{"key":"image","data":{"image":{"assetName":"1743029014413-Pasted image 20250327063921.png","url":"https://cdn.jsdelivr.net/gh/Neonity2020/geekeditor2.0/images/2025-3-27/1743029014413-Pasted%20image%2020250327063921.png"},"caption":"Pasted image 20250327063921.png","withCaption":true},"common":{}},{"key":"paragraph","data":{"content":"![[Pasted image 20250327063356.png]]\n如果你对算法完全没思路，可以从示例这样简单的提示词开始。\n![[Pasted image 20250327063518.png]]\n新版V3已经可以非常好地生成Demo了，但算法逻辑上还有一些问题。让我们继续对话，看它能不能自己理解。\n![[Pasted image 20250327063637.png]]\n![[Pasted image 20250327063657.png]]\n![[Pasted image 20250327063726.png]]\n![[Pasted image 20250327063748.png]]\n![[Pasted image 20250327063814.png]]\n![[Pasted image 20250327063839.png]]\n现在我们点击运行测试一下：\n![[Pasted image 20250327063921.png]]\nOK，这次正确了。\n我们看一看核心逻辑"},"common":{"quote":false}},{"key":"code","data":{"lang":"","lines":["<span class=\"be-code__comment\">// 拖拽开始</span>"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__keyword\">function</span> <span class=\"be-code__title function_\">handleDragStart</span>(<span class=\"be-code__params\">e</span>) {"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;draggedItem = <span class=\"be-code__variable language_\">this</span>;"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__variable language_\">this</span>.<span class=\"be-code__property\">classList</span>.<span class=\"be-code__title function_\">add</span>(<span class=\"be-code__string\">'dragging'</span>);"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;e.<span class=\"be-code__property\">dataTransfer</span>.<span class=\"be-code__property\">effectAllowed</span> = <span class=\"be-code__string\">'move'</span>;"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;e.<span class=\"be-code__property\">dataTransfer</span>.<span class=\"be-code__title function_\">setData</span>(<span class=\"be-code__string\">'text/html'</span>, <span class=\"be-code__variable language_\">this</span>.<span class=\"be-code__property\">innerHTML</span>);"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}","​"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__comment\">// 拖拽结束</span>"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__keyword\">function</span> <span class=\"be-code__title function_\">handleDragEnd</span>(<span class=\"be-code__params\"></span>) {"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__variable language_\">this</span>.<span class=\"be-code__property\">classList</span>.<span class=\"be-code__title function_\">remove</span>(<span class=\"be-code__string\">'dragging'</span>);"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;items.<span class=\"be-code__title function_\">forEach</span>(<span class=\"be-code__function\"><span class=\"be-code__params\">item</span> =&gt;</span> item.<span class=\"be-code__property\">classList</span>.<span class=\"be-code__title function_\">remove</span>(<span class=\"be-code__string\">'over'</span>));"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}","​"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__comment\">// 拖拽经过元素</span>"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__keyword\">function</span> <span class=\"be-code__title function_\">handleDragOver</span>(<span class=\"be-code__params\">e</span>) {"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__keyword\">if</span> (e.<span class=\"be-code__property\">preventDefault</span>) {"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;e.<span class=\"be-code__title function_\">preventDefault</span>();"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;e.<span class=\"be-code__property\">dataTransfer</span>.<span class=\"be-code__property\">dropEffect</span> = <span class=\"be-code__string\">'move'</span>;"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__keyword\">return</span> <span class=\"be-code__literal\">false</span>;"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__comment\">// 拖拽进入元素</span>"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__keyword\">function</span> <span class=\"be-code__title function_\">handleDragEnter</span>(<span class=\"be-code__params\"></span>) {"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__keyword\">if</span> (<span class=\"be-code__variable language_\">this</span> !== draggedItem) {"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__variable language_\">this</span>.<span class=\"be-code__property\">classList</span>.<span class=\"be-code__title function_\">add</span>(<span class=\"be-code__string\">'over'</span>);"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}","​"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__comment\">// 拖拽离开元素</span>"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__keyword\">function</span> <span class=\"be-code__title function_\">handleDragLeave</span>(<span class=\"be-code__params\"></span>) {"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__variable language_\">this</span>.<span class=\"be-code__property\">classList</span>.<span class=\"be-code__title function_\">remove</span>(<span class=\"be-code__string\">'over'</span>);"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__comment\">// 放置元素</span>"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__keyword\">function</span> <span class=\"be-code__title function_\">handleDrop</span>(<span class=\"be-code__params\">e</span>) {"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__keyword\">if</span> (e.<span class=\"be-code__property\">stopPropagation</span>) {"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;e.<span class=\"be-code__title function_\">stopPropagation</span>();"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}","​"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__keyword\">if</span> (draggedItem !== <span class=\"be-code__variable language_\">this</span>) {"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__keyword\">const</span> draggedValue = <span class=\"be-code__built_in\">parseInt</span>(draggedItem.<span class=\"be-code__title function_\">getAttribute</span>(<span class=\"be-code__string\">'data-value'</span>));"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__keyword\">const</span> targetValue = <span class=\"be-code__built_in\">parseInt</span>(<span class=\"be-code__variable language_\">this</span>.<span class=\"be-code__title function_\">getAttribute</span>(<span class=\"be-code__string\">'data-value'</span>));","​"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__comment\">// 重新排序</span>"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__title function_\">reorderItems</span>(draggedValue, targetValue);"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}","​"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__variable language_\">this</span>.<span class=\"be-code__property\">classList</span>.<span class=\"be-code__title function_\">remove</span>(<span class=\"be-code__string\">'over'</span>);"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class=\"be-code__keyword\">return</span> <span class=\"be-code__literal\">false</span>;"," &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}"]},"common":{"quote":false}}],"typeset":"typeset-1687836132043","layout":"web","basic":{"title":"","cover":"","summary":""}}